<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Sample1</title>
    <style type="text/css">
        body {
            font-family: 'Segoe UI', sans-serif;
        }

        .svgbox {
            border: #000000 solid 1px;
            background: #e9e9e9;
        }

        .code {
            border: #000000 solid 1px;
            background: #ffffe0;
        }

        .sample3_node {
            stroke: blue;
            fill: orange;
        }

        .sample4_vertex {
            --default-surface-type: rectangle;
        }

        .sample5_graph {
            --default-vertex-class: sample5_vertex;
        }

        .sample5_vertex {
            --default-surface-type: circle;
            --default-surface-class: sample5_circle;
            --default-text-class: sample5_text;
        }

        .sample5_circle {
            --default-radius: 40;
            fill: green;
        }

        .sample5_text {
            fill: blue;
            font-size: 20pt
        }
    </style>

    <script src="scripts/graph_table_svg.js"></script>
    <script type="text/javascript">
        var Graph = GraphTableSVG.Graph;
        var Edge = GraphTableSVG.Edge;
        var Vertex = GraphTableSVG.Vertex;
        var Table = GraphTableSVG.Table;
        function createGraph(id, graphClass = null, vertexClass = null, edgeClass = null) {
            /* svgタグの取得 */
            var box = document.getElementById(id);
            /* graphの作成 */
            var graph = new GraphTableSVG.Graph(box, graphClass);
            /* graphをsvgタグの子に入れる */
            box.appendChild(graph.svgGroup);
            /* vertexの作成 */
            var node1 = GraphTableSVG.Vertex.create(graph, { className : vertexClass });
            var node2 = GraphTableSVG.Vertex.create(graph, { className : vertexClass });
            var node3 = GraphTableSVG.Vertex.create(graph, { className : vertexClass });
            var edge1 = GraphTableSVG.Edge.create(graph, { className : edgeClass });
            var edge2 = GraphTableSVG.Edge.create(graph, { className : edgeClass });
            /* node1の座標を設定 */
            graph.connect(node1, edge1, node2);
            graph.connect(node1, edge2, node3);
            [node1.x, node1.y] = [100, 100];
            [node2.x, node2.y] = [150, 200];
            [node3.x, node3.y] = [50, 200];
            node1.svgText.textContent = "1";
            node2.svgText.textContent = "2";
            node3.svgText.textContent = "3";
            return [graph, node1, node2, node3, edge1, edge2];
        }
        var _graph;
        var _node1;
        function sample3() {
            var [graph, node1, node2, node3, edge1, edge2] = createGraph("svgbox");
            var animateMotion = document.createElementNS('http://www.w3.org/2000/svg', 'animateTransform');
            //animateMotion.setAttribute("attributeType", "xml");
            animateMotion.setAttribute("attributeName", "transform");
            animateMotion.setAttribute("type", "translate");
            animateMotion.setAttribute("values", "0 50;200 50");
            animateMotion.setAttribute("calcMode", "linear");
            animateMotion.setAttribute("dur", "3s");
            animateMotion.setAttribute("repeatCount", "5");
            node1.svgGroup.appendChild(animateMotion);
            _graph = graph;
            _node1 = node1;
        }
        function update() {
            _graph.update();
            console.log(_node1.svgGroup.transform.animVal);
        }
        window.onload = () => {
            sample3();
        };

    </script>
</head>

<body>
    <h1>Sample</h1>

    <svg viewBox="0 0 1000 800" width="1000px" height="800px" id="svgbox" xmlns="http://www.w3.org/2000/svg" class="svgbox">
    </svg>
    <br>

</body>


</html>